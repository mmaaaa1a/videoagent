[2025-10-07 19:31:01] ğŸš€ Starting VideoRAG Web API on port 64451
[2025-10-07 19:31:01] ğŸ“ Main process PID: 935530
[2025-10-07 19:31:04] ğŸ”„ Returning default configuration from environment variables
[2025-10-07 19:31:07] âœ… åŒæ­¥é…ç½® image_bind_model_path -> IMAGEBIND_MODEL_PATH = /data/é¡¹ç›®/videoagent/models
[2025-10-07 19:31:07] âœ… åŒæ­¥é…ç½® asr_model -> ASR_MODEL = paraformer-v2
[2025-10-07 19:31:07] âœ… é…ç½®åŒæ­¥åˆ°ç¯å¢ƒå˜é‡å®Œæˆ
[2025-10-07 19:31:07] ğŸ”„ Global config set: {'openai_api_key': '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', 'openai_base_url': 'https://openrouter.ai/api/v1/', 'ali_dashscope_api_key': 'sk-3236ebaa10bc477987e3264e8a8b7d0f', 'ali_dashscope_base_url': 'https://dashscope.aliyuncs.com/compatible-mode/v1', 'analysisModel': 'x-ai/grok-code-fast-1', 'processingModel': 'x-ai/grok-code-fast-1', 'caption_model': 'qwen-vl-plus', 'asr_model': 'paraformer-v2', 'image_bind_model_path': '/data/é¡¹ç›®/videoagent/models', 'base_storage_path': '/data/é¡¹ç›®/videoagent/storage'}
[2025-10-07 19:31:07] âœ… ImageBind manager configured with model path: /data/é¡¹ç›®/videoagent/models
[2025-10-07 19:31:12] ğŸ” Scanning video files in: /data/é¡¹ç›®/videoagent/storage
[2025-10-07 19:31:14] ğŸ“¹ Starting video processing from web upload: 1 files
[2025-10-07 19:31:16] ğŸ” Session status: {'status': 'processing', 'message': 'Initializing AI Assistant...', 'current_step': 'Initializing', 'total_videos': 1, 'processed_videos': 0}
[2025-10-07 19:31:19] ğŸ” Session status: {'status': 'processing', 'message': 'Initializing AI Assistant...', 'current_step': 'Initializing', 'total_videos': 1, 'processed_videos': 0}
[2025-10-07 19:31:19] ğŸ”§ Index worker process 937099 set name to: videorag-index-8wxp8zjg29fvdghctt0csk
[2025-10-07 19:31:19] ğŸ” Session status: {'status': 'processing', 'message': 'Initializing AI Assistant...', 'current_step': 'Initializing'}
[2025-10-07 19:31:19] ğŸ¤ ASRé…ç½®: æ¨¡å¼=local, æ¨¡å‹=paraformer-v2
[2025-10-07 19:31:19] ğŸ”— åµŒå…¥é…ç½®: URL=https://dashscope.aliyuncs.com/compatible-mode/v1, æ¨¡å‹=text-embedding-v4, ç»´åº¦=1024
[2025-10-07 19:31:21] ğŸ” Session status: {'status': 'processing', 'message': 'Initializing AI Assistant...', 'current_step': 'Initializing', 'total_videos': 1, 'processed_videos': 0}
[2025-10-07 19:31:23] ğŸ” Session status: {'status': 'processing', 'message': 'Initializing AI Assistant...', 'current_step': 'Initializing', 'total_videos': 1, 'processed_videos': 0}
[2025-10-07 19:31:23] ğŸ” Session status: {'status': 'processing', 'message': 'Processing video: 1759707563218-0-0-30', 'current_step': 'Starting Video', 'timestamp': 1759836683.389957}
[2025-10-07 19:31:23] ğŸ“Š Progress: Starting Video - Processing video: 1759707563218-0-0-30
[2025-10-07 19:31:23] ğŸ” Session status: {'status': 'processing', 'message': 'Splitting video: 1759707563218-0-0-30 into segments', 'current_step': 'Splitting Video', 'timestamp': 1759836683.3908432}
[2025-10-07 19:31:23] ğŸ“Š Progress: Splitting Video - Splitting video: 1759707563218-0-0-30 into segments
[2025-10-07 19:31:24] ğŸ” Session status: {'status': 'processing', 'message': 'Video 1759707563218-0-0-30 split into 1 segments', 'current_step': 'Video Split', 'timestamp': 1759836684.6241472}
[2025-10-07 19:31:24] ğŸ“Š Progress: Video Split - Video 1759707563218-0-0-30 split into 1 segments
[2025-10-07 19:31:24] ğŸ” Session status: {'status': 'processing', 'message': 'Transcribing audio for video: 1759707563218-0-0-30', 'current_step': 'Transcribing Audio', 'timestamp': 1759836684.6246815}
[2025-10-07 19:31:24] ğŸ“Š Progress: Transcribing Audio - Transcribing audio for video: 1759707563218-0-0-30
[2025-10-07 19:31:25] ğŸ” Session status: {'status': 'processing', 'message': 'Transcribing audio for video: 1759707563218-0-0-30', 'current_step': 'Transcribing Audio', 'total_videos': 1, 'processed_videos': 0, 'timestamp': 1759836684.6246815}
[2025-10-07 19:31:27] ğŸ” Session status: {'status': 'processing', 'message': 'Transcribing audio for video: 1759707563218-0-0-30', 'current_step': 'Transcribing Audio', 'total_videos': 1, 'processed_videos': 0, 'timestamp': 1759836684.6246815}
[2025-10-07 19:31:29] ğŸ” Session status: {'status': 'processing', 'message': 'Transcribing audio for video: 1759707563218-0-0-30', 'current_step': 'Transcribing Audio', 'total_videos': 1, 'processed_videos': 0, 'timestamp': 1759836684.6246815}
[2025-10-07 19:32:06] ğŸ” Session status: {'status': 'processing', 'message': 'ASRå¤„ç†ä¸­: 1/1 (é€Ÿåº¦: 0.02/ç§’)', 'current_step': 'Transcribing Audio', 'progress_current': 1, 'progress_total': 1, 'progress_percentage': 100.0, 'processing_speed': '0.02 æ–‡ä»¶/ç§’', 'eta': '', 'resource_usage': {'cpu': '0%', 'memory': '30%'}, 'timestamp': 1759836726.238021}
[2025-10-07 19:32:06] ğŸ“Š Progress: Transcribing Audio - ASRå¤„ç†ä¸­: 1/1 (é€Ÿåº¦: 0.02/ç§’)
[2025-10-07 19:32:06] ğŸ” Session status: {'status': 'processing', 'message': 'Audio transcription completed for video: 1759707563218-0-0-30', 'current_step': 'Audio Transcribed', 'timestamp': 1759836726.241148}
[2025-10-07 19:32:06] ğŸ“Š Progress: Audio Transcribed - Audio transcription completed for video: 1759707563218-0-0-30
[2025-10-07 19:32:06] ğŸ” Session status: {'status': 'processing', 'message': 'Processing video segments for: 1759707563218-0-0-30', 'current_step': 'Processing Segments', 'timestamp': 1759836726.241588}
[2025-10-07 19:32:06] ğŸ“Š Progress: Processing Segments - Processing video segments for: 1759707563218-0-0-30
[2025-10-07 19:32:19] ğŸ” Session status: {'status': 'processing', 'message': 'å¼€å§‹ç”Ÿæˆå­—å¹•: 1759707563218-0-0-30 (1 ä¸ªç‰‡æ®µ)', 'current_step': 'Generating Captions', 'timestamp': 1759836739.5410075}
[2025-10-07 19:32:19] ğŸ“Š Progress: Generating Captions - å¼€å§‹ç”Ÿæˆå­—å¹•: 1759707563218-0-0-30 (1 ä¸ªç‰‡æ®µ)
[2025-10-07 19:32:20] ğŸ” Scanning video files in: /data/é¡¹ç›®/videoagent/storage
[2025-10-07 19:34:27] ğŸ” Session status: {'status': 'processing', 'message': 'å­—å¹•ç”Ÿæˆå®Œæˆ: 1/1 æˆåŠŸ, è€—æ—¶ 132.22s (é€Ÿåº¦: 0.01 ç‰‡æ®µ/ç§’)', 'current_step': 'Captions Generated', 'timestamp': 1759836867.4301834}
[2025-10-07 19:34:27] ğŸ“Š Progress: Captions Generated - å­—å¹•ç”Ÿæˆå®Œæˆ: 1/1 æˆåŠŸ, è€—æ—¶ 132.22s (é€Ÿåº¦: 0.01 ç‰‡æ®µ/ç§’)
[2025-10-07 19:34:29] ğŸ” Session status: {'status': 'processing', 'message': 'Video segments processed and captions generated for: 1759707563218-0-0-30', 'current_step': 'Segments Processed', 'timestamp': 1759836869.1373477}
[2025-10-07 19:34:29] ğŸ“Š Progress: Segments Processed - Video segments processed and captions generated for: 1759707563218-0-0-30
[2025-10-07 19:34:30] ğŸ” Session status: {'status': 'processing', 'message': 'Encoding video features for: 1759707563218-0-0-30', 'current_step': 'Encoding Features', 'timestamp': 1759836870.0933805}
[2025-10-07 19:34:30] ğŸ“Š Progress: Encoding Features - Encoding video features for: 1759707563218-0-0-30
[2025-10-07 19:35:12] ğŸ” Session status: {'status': 'processing', 'message': 'Video features encoded for: 1759707563218-0-0-30', 'current_step': 'Features Encoded', 'timestamp': 1759836912.2699788}
[2025-10-07 19:35:12] ğŸ“Š Progress: Features Encoded - Video features encoded for: 1759707563218-0-0-30
[2025-10-07 19:35:12] ğŸ” Session status: {'status': 'processing', 'message': 'Video processing completed: 1759707563218-0-0-30', 'current_step': 'One Video Completed', 'timestamp': 1759836912.2757583}
[2025-10-07 19:35:12] ğŸ“Š Progress: One Video Completed - Video processing completed: 1759707563218-0-0-30
[2025-10-07 19:35:12] âœ… Video completed: 1759707563218-0-0-30.mp4
[2025-10-07 19:35:13] ğŸ” Session status: {'status': 'error', 'message': "Video indexing failed: 'global_config'", 'current_step': 'Error'}
[2025-10-07 19:35:13] âŒ Process-based video indexing failed: 'global_config'
[2025-10-07 19:35:54] ğŸ”” Received signal 2, initiating shutdown...
[2025-10-07 19:35:54] ğŸ”” Received signal 15, initiating shutdown...
[2025-10-07 19:35:54] ğŸ”” VideoRAG API server is shutting down...
[2025-10-07 19:35:54] ğŸ§¹ Starting process cleanup...
[2025-10-07 19:35:56] ğŸ§¹ Process manager cleanup completed
[2025-10-07 19:35:56] âš ï¸ ImageBind not loaded, nothing to release
[2025-10-07 19:35:56] ğŸ§¹ ImageBind manager cleaned up
[2025-10-07 19:35:56] âœ… Cleanup completed
[2025-10-07 19:40:58] ğŸ” å¼€å§‹éªŒè¯global_configé…ç½®...
[2025-10-07 19:40:58] âš ï¸ å‘ç°ç¼ºå¤±é…ç½®å­—æ®µï¼Œå·²è®¾ç½®é»˜è®¤å€¼: ['caption_model', 'tiktoken_model_name', 'entity_extract_max_gleaning', 'entity_summary_to_max_tokens', 'max_graph_cluster_size', 'graph_cluster_seed', 'retrieval_topk_chunks', 'fine_num_frames_per_segment', 'video_embedding_batch_num', 'video_embedding_dim']
[2025-10-07 19:40:58] âš ï¸ LLMé…ç½®ç¼ºå¤±ï¼Œåˆ›å»ºç©ºçš„LLMé…ç½®
[2025-10-07 19:40:58] âš ï¸ å‘ç°ç¼ºå¤±çš„LLMé…ç½®å­—æ®µ: ['best_model_func', 'cheap_model_func', 'embedding_func', 'best_model_name', 'cheap_model_name', 'embedding_model_name', 'embedding_dim', 'best_model_max_token_size', 'cheap_model_max_token_size', 'embedding_batch_num']
[2025-10-07 19:40:58] âš ï¸ addon_paramsé…ç½®ç¼ºå¤±ï¼Œåˆ›å»ºç©ºé…ç½®
[2025-10-07 19:40:58] âœ… global_configé…ç½®éªŒè¯å®Œæˆ
[2025-10-07 19:43:39] ğŸ” å¼€å§‹éªŒè¯global_configé…ç½®...
[2025-10-07 19:43:39] âš ï¸ å‘ç°ç¼ºå¤±é…ç½®å­—æ®µï¼Œå·²è®¾ç½®é»˜è®¤å€¼: ['processingModel', 'caption_model', 'tiktoken_model_name', 'entity_extract_max_gleaning', 'entity_summary_to_max_tokens', 'max_graph_cluster_size', 'graph_cluster_seed', 'retrieval_topk_chunks', 'fine_num_frames_per_segment', 'video_embedding_batch_num', 'video_embedding_dim']
[2025-10-07 19:43:39] âš ï¸ LLMé…ç½®ç¼ºå¤±ï¼Œåˆ›å»ºç©ºçš„LLMé…ç½®
[2025-10-07 19:43:39] âš ï¸ å‘ç°ç¼ºå¤±çš„LLMé…ç½®å­—æ®µ: ['best_model_func', 'cheap_model_func', 'embedding_func', 'best_model_name', 'cheap_model_name', 'embedding_model_name', 'embedding_dim', 'best_model_max_token_size', 'cheap_model_max_token_size', 'embedding_batch_num']
[2025-10-07 19:43:39] âš ï¸ addon_paramsé…ç½®ç¼ºå¤±ï¼Œåˆ›å»ºç©ºé…ç½®
[2025-10-07 19:43:39] âœ… global_configé…ç½®éªŒè¯å®Œæˆ
