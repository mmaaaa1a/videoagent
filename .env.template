# ============================================
# VideoRAG 环境配置文件
# ============================================
# 复制此文件为 .env 并填入实际值

# ============================================
# 服务器配置
# ============================================
SERVER_HOST=0.0.0.0
SERVER_PORT=64451
INTERNAL_PORT=64451

# ============================================
# API 密钥配置 (必填)
# ============================================
# OpenAI API配置
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1

# 阿里云DashScope API配置
ALI_DASHSCOPE_API_KEY=your_dashscope_api_key_here
ALI_DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# ============================================
# 模型配置
# ============================================
# 分析模型 - 用于详细分析任务
ANALYSIS_MODEL=x-ai/grok-code-fast-1
PROCESSING_MODEL=x-ai/grok-code-fast-1
CAPTION_MODEL=qwen-vl-plus

# ASR配置 - 可切换本地或云端处理
ASR_MODE=local                    # local: 本地faster-whisper处理，完全离线
                                 # api: 阿里云DashScope API处理，需要网络和费用
ASR_MODEL=large-v3               # local模式: large-v3等本地球
                                 # api模式: paraformer-realtime-v2等

# ============================================
# 存储配置
# ============================================
# ImageBind模型路径
IMAGEBIND_MODEL_PATH=/app/models/imagebind.pth

# 基础存储路径
BASE_STORAGE_PATH=/app/storage

# 自定义ImageBind模型目录 (可选)
# 如果需要将模型存储到其他目录，请设置此变量并相应调整docker-compose.yml的挂载
# IMAGBIND_CUSTOM_DIR=/custom/model/path

# ============================================
# 开发环境配置 (仅开发时使用)
# ============================================
# 前端开发端口
FRONTEND_DEV_PORT=5173

# Web开发端口
WEB_DEV_PORT=3000

# 后端开发端口
BACKEND_DEV_PORT=64452

# ============================================
# 部署配置
# ============================================
# 容器名称前缀
CONTAINER_PREFIX=videorag

# 镜像标签
IMAGE_TAG=latest

# ============================================
# 1panel部署配置
# ============================================
# 服务器路径
SERVER_PATH=/opt/1panel/apps/videorag

# 域名配置
SERVER_DOMAIN=your-domain.com

# ============================================
# GPU配置 (可选)
# ============================================
# CUDA设备 (留空使用CPU)
CUDA_VISIBLE_DEVICES=

# ============================================
# 嵌入模型配置 (新增)
# ============================================
# 嵌入模型API配置，支持OpenAI、DashScope等服务
EMBEDDING_API_KEY=    # 嵌入模型使用的API密钥
EMBEDDING_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1  # 默认使用DashScope
EMBEDDING_MODEL_NAME=text-embedding-v4  # DashScope的嵌入模型
EMBEDDING_MODEL_DIM=1024  # 向量维度 (DashScope:1024, OpenAI:1536)

# ============================================
# 高级配置
# ============================================
# 调试模式
FLASK_DEBUG=false

# 日志级别
LOG_LEVEL=INFO

# 最大文件上传大小 (MB)
MAX_UPLOAD_SIZE=500

# 并发处理数
MAX_CONCURRENT_REQUESTS=10

# 缓存时间 (秒)
CACHE_TTL=3600

# ============================================
# 安全配置
# ============================================
# JWT密钥
JWT_SECRET=your_jwt_secret_here

# 会话超时时间 (秒)
SESSION_TIMEOUT=86400

# CORS允许的源
CORS_ORIGINS=*

# ============================================
# 监控配置
# ============================================
# 健康检查间隔 (秒)
HEALTH_CHECK_INTERVAL=30

# 性能监控
ENABLE_METRICS=true

# 日志轮转
LOG_ROTATION=true
MAX_LOG_SIZE=100MB
MAX_LOG_FILES=10